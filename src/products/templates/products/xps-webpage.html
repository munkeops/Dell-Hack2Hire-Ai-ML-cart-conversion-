{%load static%}

<!-- Use tabs. Do not use spaces-->
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
	
	<title>Dell XPS</title>

	<!-- Standard Includes -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

	<!-- Custom Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Advent+Pro:700&display=swap" rel="stylesheet"> 

	<!-- Custom CSS & JS -->
	<link rel="stylesheet" href={%static 'products/assets/css/styles.css'%}>
	<link rel="stylesheet" href={%static 'products/assets/css/Footer-Dark.css'%}>
	<link rel="stylesheet" href={%static 'products/assets/fonts/ionicons.min.css'%}>
	<link rel="stylesheet" href={%static 'products/assets/css/Footer-Dark'%}>

	<!-- Custom Modules -->
	<style>
		#scrollable{
			overflow: scroll;
		}
	</style>
</head>

<body id="body">
	<nav class="navbar navbar-dark navbar-expand-md fixed-top bg-dark">
		<div class="container">
			<button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navcol-1">
				<ul class="nav navbar-nav flex-grow-1 justify-content-between">
					<li class="nav-item" role="presentation">
						<a class="nav-link active" href="index.html" style="padding: 0px;">
							<img src={%static 'products/assets/img/Dell_Logo.png'%} width="35px">
						</a>
					</li>
					<li class="nav-item" role="presentation">
						<a class="nav-link active" href="products-laptop.html">
							Laptops
						</a>
					</li>
					<li class="nav-item" role="presentation">
						<a class="nav-link active" href="#">
							Desktops
						</a>
					</li>
					<li class="nav-item" role="presentation">
						<a class="nav-link active" href="#">
							Server
						</a>
					</li>
					<li class="nav-item" role="presentation">
						<a class="nav-link active" href="#">
							Alienware
						</a>
					</li>
					<li class="nav-item" role="presentation">
						<a class="nav-link active" href="#">
							<i class="fa fa-shopping-bag"></i>
						</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>

	<div class="container" style="margin-top: 80px;">
		<i><h1 class="head-title">XPS</h1></i>
	</div>

	<div class="container-fluid promo-image-fluid" style="margin-top: 80px; padding: 0;">
		<div id="scrollable-price">
			<div class="image-box">
				<img src={%static 'products/assets/img/XPS/Price.png'%} class="promo-image" alt="XPS">
			</div>
		</div>
	</div>

	<div class="container-fluid promo-image-fluid">
		<div id="scrollable-cpu">
			<div class="image-box">
				<img src={%static 'products/assets/img/XPS/CPU.png'%}  alt="Intel Inside" class="promo-image">
			</div>
		</div>
	</div>

	<div class="container-fluid promo-image-fluid">
		<div id="scrollable-memory">
			<div class="image-box">
				<img src={%static 'products/assets/img/XPS/Memory.png'%} alt="A lot of memory" class="promo-image">
			</div>
		</div>
	</div>

	<div class="container-fluid promo-image-fluid">
		<div id="scrollable-screen">
			<div class="image-box">
				<img src={%static 'products/assets/img/XPS/Screen.png'%} alt="Great Screen" class="promo-image">
			</div>
		</div>
	</div>

	<div>
		

		<h3 style="text-align: center; margin-top: 2em;">
			<form action="../xps13-series">
			{% csrf_token %}
				<input type="submit">
			</form>
		</h3>
	</div>

	<div class="footer-dark">
		<footer>
			<div class="container">
				<div class="row">
					<div class="col-sm-6 col-md-3 item">
						<h3>Links</h3>
						<ul>
							<li><a href="products-laptop.html">Laptops</a></li>
							<li><a href="#">Desktops</a></li>
							<li><a href="#">Server</a></li>
							<li><a href="#">IT Services</a></li>
						</ul>
					</div>
					<div class="col-sm-6 col-md-3 item">
						<h3>About</h3>
						<ul>
							<li><a href="#">Company</a></li>
							<li><a href="#">Team</a></li>
							<li><a href="#">Careers</a></li>
						</ul>
					</div>
					<div class="col-md-6 item text">
						<h3>Listen. Learn. Deliver. That’s what we’re about.</h3>
						<p>
							Dell empowers countries, communities, customers and people everywhere to use technology to realize their dreams.
							Customers trust us to deliver technology solutions that help them do and achieve more, whether they’re at home, work,
							school or anywhere in their world. Learn more about our story, purpose and people behind our customer-centric approach.
						</p>
					</div>
					<div class="col item social">
						<a href="#">
							<i class="icon ion-social-facebook"></i>
						</a>
						<a href="#">
							<i class="icon ion-social-twitter"></i>
						</a>
						<a href="#">
							<i class="icon ion-social-snapchat"></i>
						</a>
						<a href="#">
							<i class="icon ion-social-instagram"></i>
						</a>
					</div>
				</div>
				<p class="copyright">Dell © 2019</p>
			</div>
		</footer>
	</div>

	<script>
		var docViewTop;
		var docViewBottom;

		var currentState = {
			Price : false,
			Cpu : false,
			Memory : false,
			Screen : false
		}

		var stats = {
			Price : [],
			Cpu : [],
			Memory : [],
			Screen : [],
			'csrfmiddlewaretoken':"{{csrf_token}}"
		}

		window.onscroll = function() { isScrolledIntoView() }

		function inView(element){
			var elemTop = document.getElementById(element).offsetTop;
			var elemBottom = elemTop + document.getElementById(element).offsetHeight;
			var elemDisplayNotNone = document.getElementById(element).style.display !== "none";

			return (((docViewBottom >= elemTop) && (docViewTop <= elemBottom)) && elemDisplayNotNone);
		}

		function isScrolledIntoView() {
			docViewTop = $(window).scrollTop();
			docViewBottom = docViewTop + window.innerHeight;
			
			var dateObj = new Date();

			retVal_Price = inView("scrollable-price");
			retVal_Cpu = inView("scrollable-cpu");
			retVal_Memory = inView("scrollable-memory");
			retVal_Screen = inView("scrollable-screen");

			if (!(currentState.Price == retVal_Price)){
				currentState.Price = retVal_Price;
				stats.Price.push(dateObj.getTime());
				// console.log(stats);
			}
			if (!(currentState.Cpu == retVal_Cpu)){
				currentState.Cpu = retVal_Cpu;
				stats.Cpu.push(dateObj.getTime());
				// console.log(stats);
			}
			if (!(currentState.Memory == retVal_Memory)){
				currentState.Memory = retVal_Memory;
				stats.Memory.push(dateObj.getTime());
				// console.log(stats);
			}
			if (!(currentState.Screen == retVal_Screen)){
				currentState.Screen = retVal_Screen;
				stats.Screen.push(dateObj.getTime());
				// console.log(stats);
			}
		}

		function cleanStats(){
			var dateObj = new Date();

			if (stats.Cpu.length % 2 == 1){
				stats.Cpu.push(dateObj.getTime());
			}
			if (stats.Memory.length % 2 == 1){
				stats.Memory.push(dateObj.getTime());
			}
			if (stats.Price.length % 2 == 1){
				stats.Price.push(dateObj.getTime());
			}
			if (stats.Screen.length % 2 == 1){
				stats.Screen.push(dateObj.getTime());
			}
		}

		$(document).ready(function(){
			$("#btn-sub").click(function (event){
				cleanStats();
				event.preventDefault();
				$.ajax({
					type: "POST",
					url: "/xps-webpage/",
					data: stats,
				});

			return false;
			})
		})
	</script>

</body>

</html>